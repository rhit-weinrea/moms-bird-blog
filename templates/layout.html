<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Creature Photo Album</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block head %}{% endblock %}
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="{{ url_for('index') }}">Creature Photo Album</a>
      <!-- mobile menu button -->
      <button id="mobileMenuBtn" class="btn btn-outline-secondary d-lg-none ml-2" type="button" aria-label="Open menu">â˜°</button>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('species_list') }}">Species</a></li>
          {% if session.editor_logged_in %}
          <li class="nav-item"><a class="nav-link" href="{{ url_for('new_post') }}">New Post</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('new_species') }}">New Species</a></li>
          {% endif %}
        </ul>
        <ul class="navbar-nav">
          {% if session.editor_logged_in %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Editor Login</a></li>
          {% endif %}
        </ul>
      </div>
    </nav>
    <!-- mobile side nav (small screens only) -->
    <div id="sidenavOverlay" class="sidenav-overlay" onclick="closeSidenav()" style="display:none"></div>
    <aside id="mobileSidenav" class="mobile-sidenav" aria-hidden="true">
      <div class="p-3">
        <h5>Creature Photo Album</h5>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('species_list') }}">Species</a></li>
          {% if session.editor_logged_in %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('new_post') }}">New Post</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('new_species') }}">New Species</a></li>
            <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Editor Login</a></li>
          {% endif %}
        </ul>
      </div>
    </aside>
    <div class="container mt-4 center-column">
      <div style="width:100%">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
      </div>
    </div>
    {% if session.editor_logged_in %}
      <button id="fabNewPost" class="fab-new-post d-lg-none" title="New Post">+</button>
    {% endif %}
    <script>
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileSidenav = document.getElementById('mobileSidenav');
      const sidenavOverlay = document.getElementById('sidenavOverlay');
      function openSidenav(){
        mobileSidenav.classList.add('open');
        sidenavOverlay.style.display='block';
        mobileSidenav.setAttribute('aria-hidden','false');
      }
      function closeSidenav(){
        mobileSidenav.classList.remove('open');
        sidenavOverlay.style.display='none';
        mobileSidenav.setAttribute('aria-hidden','true');
      }
      if (mobileMenuBtn){
        mobileMenuBtn.addEventListener('click', openSidenav);
      }
      // fab new post wiring
      const fab = document.getElementById('fabNewPost');
      if (fab){
        fab.addEventListener('click', function(){ window.location.href = "{{ url_for('new_post') }}"; });
      }
    </script>
  </body>
</html>